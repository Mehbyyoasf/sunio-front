(this["webpackJsonpfront-js"]=this["webpackJsonpfront-js"]||[]).push([[39],{1407:function(e,t,n){},1408:function(e,t,n){},1409:function(e,t,n){},1463:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var c=n(0),a=n(3),r=n(21),s=n(2),i=n(57),o=n(17),u=n.n(o),d=(n(645),n(28)),f=n(39),j=(n(1407),n(126)),m=(n(1408),n(9));function b(e){var t=Object(s.useState)(!1),n=Object(r.a)(t,2),c=n[0],a=n[1],o=function(t,n){var c=e.reverse,a="next"==n,r=e[c?"min":"max"],s=e[c?"max":"min"];return a?t==r?s:t+(c?-1:1):t==s?r:t+(c?1:-1)};Object(s.useEffect)((function(){a(!c)}),[e.now]);var u=function(e){var t=o(e,"prev"),n=[e,t,o(t,"prev")];return n[c?"push":"unshift"](c?o(t,"prev"):o(e,"next")),n};return Object(m.jsx)(i.a,{children:function(){return Object(m.jsx)("div",{className:"cards",children:u(e.now).map((function(t,n){return Object(m.jsx)("div",{className:"card".concat(t==e.now?" now":""),children:Object(m.jsx)("div",{className:"sides",children:["front","back"].map((function(e){return Object(m.jsx)("div",{className:"side ".concat(e),children:Object(m.jsx)("div",{className:"side-num",children:"front"==e?t:o(t,"next")})},"side".concat(e))}))})},"flip-card".concat(n))}))})}})}n(1409);var l=n(1),O=null;function v(e){var t=Object(i.d)((function(){return j.a.network})),n=Object(i.d)((function(){return j.a.farmStore})),c=Object(s.useState)(n.farmData[e.id].start||e.start),a=Object(r.a)(c,2),o=a[0],u=a[1],d=Object(s.useState)(n.farmData[e.id].diff||{}),f=Object(r.a)(d,2),v=f[0],h=f[1],p=Object(s.useState)(n.farmData[e.id].end||e.end),x=Object(r.a)(p,2),w=x[0];x[1];Object(s.useEffect)((function(){S(v)?N():O=window.setTimeout((function(){D(),S()&&N()}),1e3)}),[o]);var N=function(){window.clearTimeout(O),t.setData({isTimeOver:!0}),e.onStop&&e.onStop()},D=function(){var t=Math.abs(w-o),c=Math.floor(t/1e3),a=Math.floor(c/60),r=Math.floor(a/60),s=(Math.floor(r/24),{hours:r%24,minutes:a%60,seconds:c%60}),i=o+1e3;Object(l.a)(w).isNaN()||Object(l.a)(o).isNaN()||(h(s),u(i),n.farmData[e.id].diff=s,n.farmData[e.id].start=i)},S=function(){return w&&o>w},g={days:[[0,9],[0,9]],hours:[[0,2],[0,4]],minutes:[[0,5],[0,9]],seconds:[[0,5],[0,9]]};return Object(m.jsx)(i.a,{children:function(){return Object(m.jsx)("div",{className:"countdown",children:Object.keys(v).map((function(e){return Object(m.jsx)("div",{className:"countdown-".concat(e),children:Array(2).fill(0).map((function(t,n){return Object(m.jsx)(b,{reverse:!0,now:+(c=v[e],(c<10?"0"+c:c)+"")[n],min:g[e][n][0],max:g[e][n][1]},"".concat(e).concat(n));var c}))},e)}))})}})}n(6);function h(e){Object(i.d)((function(){return j.a.pool})),Object(i.d)((function(){return j.a.network}));var t,n,o=Object(i.d)((function(){return j.a.farmStore})),b=Object(s.useState)((new Date).getTime()),l=Object(r.a)(b,2),O=l[0],h=l[1],p=Object(s.useState)(1e3*(null===(t=o.farmData[e.id])||void 0===t?void 0:t.remainingTime)+1e3*f.a.unfreezeTime),x=Object(r.a)(p,2),w=x[0],N=x[1],D=1e3*(null===(n=o.farmData[e.id])||void 0===n?void 0:n.remainingTime)+1e3*f.a.unfreezeTime;Object(s.useEffect)((function(){S()}),[]);var S=function(){var t=Object(a.a)(Object(c.a)().mark((function t(){var n,a;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d.o)();case 3:(n=t.sent).success&&(a=n.time,h(a),N(D),o.farmData[e.id].start=a,o.farmData[e.id].end=w),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("get time error",t.t0),setTimeout((function(){S()}),3e3);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return Object(m.jsx)(i.a,{children:function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"count-down-wrap",children:[Object(m.jsx)("div",{className:"count",children:Object(m.jsx)(v,{start:O,end:w,id:e.id,onStop:e.stopCount})}),Object(m.jsxs)("div",{className:"countdesc",children:[Object(m.jsx)("span",{className:"cd-hour",children:u.a.get("century.h")}),Object(m.jsxs)("span",{className:"cd-minute",children:[u.a.get("century.m")," "]}),Object(m.jsx)("span",{className:"cd-second",children:u.a.get("century.s")})]})]})})}})}},1621:function(e,t,n){"use strict";n.r(t);n(2);var c=n(1463),a=(n(734),n(9));t.default=function(){return Object(a.jsx)(c.a,{})}},734:function(e,t,n){}}]);